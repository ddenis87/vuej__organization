(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bdc63272"],{"0955":function(e,t,i){"use strict";i("4697")},"0e7e":function(e,t,i){"use strict";i("d999")},2051:function(e,t,i){"use strict";i("599c")},"3fb6":function(e,t,i){"use strict";i("a8d5")},4697:function(e,t,i){},"599c":function(e,t,i){},"7ae9":function(e,t,i){"use strict";i("a277")},a277:function(e,t,i){},a8d5:function(e,t,i){},d999:function(e,t,i){},ef9d:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-field el-field-dialog-list-box",class:{"el-field_single-line":e.isSingleLine,"el-field_hide-message":e.isHideMessage}},[i("v-text-field",{staticClass:"el-field__item",attrs:{dense:"","append-icon":"mdi-dots-horizontal",tabindex:"1","single-line":e.isSingleLine,"hide-details":e.isHideMessage,disabled:e.isDisabled,label:e.fieldLabel,clearable:e.isBtnClear,solo:e.isHideUnderline,flat:e.isHideUnderline},on:{"click:append":e.eventOpenDialog,"click:clear":e.eventClearValue,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.eventKeyEnter(t)}},model:{value:e.fieldValueText,callback:function(t){e.fieldValueText=t},expression:"fieldValueText"}}),i("dialog-bar-right",{attrs:{"is-dialog-name":"Список значений - "+e.inputProperties.label,"is-dialog-show":e.isDialogShow,width:"586"},on:{"close-dialog":e.eventCloseDialog}},[i("el-field-dialog-list-box-item",{attrs:{"input-properties":e.inputProperties,"count-select-value":e.countSelectValue},on:{"accept-list":e.eventAcceptList}})],1)],1)},l=[],o=(i("4160"),i("a15b"),i("fb6a"),i("ac1f"),i("466d"),i("5319"),i("1276"),i("159b"),i("f074")),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-field-dialog-list-box-item",on:{keydown:function(t){return t.stopPropagation(),e.eventKeydown(t)}}},[i("div",{staticClass:"el-field-dialog-list-box-item__action"},[i("el-button",{staticClass:"element-start",on:{click:e.addingItem}},[e._v("Добавить")]),i("el-button",{staticClass:"tabspace-end",on:{click:e.acceptList}},[e._v("Применить")])],1),i("div",{staticClass:"el-field-dialog-list-box-item__body"},[i("data-table-lazy",{attrs:{headers:e.tableHeaders,items:e.tableItems,"is-clearable":!0,"input-properties":e.inputProperties},on:{"input-value":e.inputValue,"keydown-enter":e.eventKeydownEnter,"inserting-item":e.eventKeydownInsert,"deleting-item":e.deletingItem}})],1),i("div",{staticClass:"el-field-dialog-list-box-item__end"},[i("el-button",{staticClass:"element-end",on:{keydown:e.eventKeydownElementEnd}},[e._v("End")])],1)])},s=[],u=(i("7db0"),i("a434"),i("a9e3"),i("b64b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"data-table-lazy"},[i("div",{staticClass:"data-table-lazy__body"},[i("data-table-lazy-body",{attrs:{headers:e.headers,items:e.items,template:e.computedTemplateTable,"is-clearable":e.isClearable,"input-properties":e.inputProperties},on:{"focused-row":e.focusedRow,"input-value":e.inputValue,"keydown-enter":e.eventKeydownEnter,"inserting-item":e.insertingItem,"deleting-item":e.deletingItem}})],1),e._m(0)])}),r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"data-table-lazy__footer"},[i("div",{staticClass:"footer-item"},[e._v("Insert - добавить")])])}],c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"header-row",style:e.template},e._l(e.items,(function(t,n){return i("div",{key:"header-"+n,staticClass:"header-column",style:t.position_in_template,attrs:{"data-key":t.key}},[e._v(" "+e._s(t.text)+" ")])})),0)])},d=[],f={name:"DataTableLazyHeader",props:{items:Array,template:Object,isClearable:{type:Boolean,default:!1}}},m=f,p=(i("0955"),i("2877")),h=Object(p["a"])(m,c,d,!1,null,"793cc70a",null),b=h.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"body",on:{mouseover:e.eventMouseOver,mouseout:e.eventMouseOut}},e._l(e.items,(function(t,n){return i("div",{key:"body-row-"+n,staticClass:"body-row",style:e.template,on:{focus:function(i){return e.eventRowFocus(i,t)},blur:e.eventRowBlur,click:function(i){return e.eventRowClick(i,t)}}},e._l(e.headers,(function(l,o){return i("div",{key:"body-column-"+o,staticClass:"body-column",style:l.position_in_template,on:{focus:e.eventColumnFocus,blur:e.eventColumnBlur}},[i("div",{staticClass:"body-column__item"},[i(e.componentField,{key:t.uniqueIndex,tag:"component",attrs:{"is-hide-underline":!0,"is-single-line":!0,"is-hide-message":!0,"is-required-off":!0,"is-hide-label":!0,"is-selected":!0,"is-btn-clear":!0,"input-properties":e.inputProperties},on:{"input-value":e.eventInputValue,"keydown-any":e.eventKeydown,"keydown-enter":e.eventKeyEnter,"clear-value":function(){return e.deletingItem(n,t.uniqueIndex)}},model:{value:e.tableValue[t.uniqueIndex],callback:function(i){e.$set(e.tableValue,t.uniqueIndex,i)},expression:"tableValue[itemRow.uniqueIndex]"}})],1)])})),0)})),0)},y=[],g=(i("d3b7"),{data:function(){return{isRowFocus:!1,isColumnEditing:!1,isColumnFocus:!1}},methods:{eventMouseOver:function(e){var t;this.isColumnFocus||this.isColumnEditing||this.isRowFocus||null===(t=e.target.closest(".body-row"))||void 0===t||t.classList.add("body-row_hover")},eventMouseOut:function(e){var t,i,n;(null===(t=e.relatedTarget)||void 0===t||null===(i=t.classList)||void 0===i?void 0:i.contains("tooltip"))||this.isColumnFocus||this.isColumnEditing||this.isRowFocus||null===(n=e.target.closest(".body-row"))||void 0===n||n.classList.remove("body-row_hover")},eventRowFocus:function(e,t){this.isRowFocus=!0,e.target.classList.remove("body-row_hover"),e.target.classList.add("body-row_focus")},eventRowBlur:function(e){this.isRowFocus=!1,e.target.classList.remove("body-row_focus"),null==e.relatedTarget&&this.$emit("blur-body")},eventRowClick:function(e,t){this.$emit("focused-row",e,t)},eventColumnFocus:function(e){this.isColumnFocus=!0,e.target.parentElement.classList.remove("body-row_hover"),e.target.parentElement.classList.add("body-row_focus"),e.target.classList.add("body-column_focus")},eventColumnBlur:function(e){this.isColumnFocus=!1,e.target.parentElement.classList.remove("body-row_focus"),e.target.classList.remove("body-column_focus"),null==e.relatedTarget&&this.$emit("blur-body")}}}),w=i("6e0d"),_={name:"DataTableLazyBody",mixins:[g],components:{ElButtonIcon:w["a"]},props:{headers:Array,items:Array,template:Object,isClearable:{type:Boolean,default:!1},inputProperties:{type:Object,default:function(){return{}}}},data:function(){return{messageInserting:"",tableValue:{}}},computed:{componentField:function(){switch(this.inputProperties.type){case"choice":return function(){return i.e("chunk-1bbc241a").then(i.bind(null,"5afe"))};case"field":return function(){return i.e("chunk-479c4803").then(i.bind(null,"ccfa"))}}}},methods:{eventInputValue:function(){this.$emit("input-value",this.tableValue)},eventKeydown:function(e){"Insert"==e.key&&this.$emit("inserting-item",e),"Tab"==e.key&&e.stopPropagation()},eventKeyEnter:function(e){this.$emit("keydown-enter")},deletingItem:function(e,t){this.$emit("deleting-item",e),delete this.tableValue[t],this.$emit("input-value",this.tableValue)},eventKeyBody:function(e){console.log(e),"Insert"==e.key&&this.$emit("insert-item")}}},E=_,V=(i("0e7e"),Object(p["a"])(E,v,y,!1,null,"28ecec94",null)),C=V.exports,x=(i("99af"),i("498a"),{computed:{computedTemplateTable:function(){var e={"grid-template-areas":"","grid-template-columns":""},t=this.headers;return e["grid-template-areas"]=this.computedAreaUnoLine(t),e["grid-template-columns"]=this.computedWidthUnoLine(t),e}},methods:{computedAreaUnoLine:function(e){var t='"';return e.forEach((function(e){return t+="".concat(e.key," ")})),t=t.trim(),t+='"',t},computedWidthUnoLine:function(e){var t="";return e.forEach((function(e){e.width?Array.isArray(e.width)?t+="minmax(".concat(void 0!=e.width[0]?e.width[0]:"100","px, ").concat(void 0!=e.width[1]?e.width[1]+"px":"100vw",") "):t+="".concat(e.width,"px "):t+="minmax(100px, 100vw) "})),t}}}),k={methods:{focusedRow:function(e,t){this.$emit("focused-row",t)},inputValue:function(e){this.$emit("input-value",e)},deletingItem:function(e){this.$emit("deleting-item",e)},insertingItem:function(e){this.$emit("inserting-item",e)},eventKeydownEnter:function(){this.$emit("keydown-enter")}}},I={name:"DataTableLazy",components:{DataTableLazyHeader:b,DataTableLazyBody:C},mixins:[x,k],props:{headers:Array,items:Array,isClearable:{type:Boolean,default:!1},inputProperties:{type:Object,default:function(){return{}}}}},L=I,S=(i("3fb6"),Object(p["a"])(L,u,r,!1,null,"58f29eac",null)),D=S.exports,T=i("1cbc"),B={name:"ElFieldDialogListBoxItem",components:{DataTableLazy:D,ElButton:T["a"]},props:{countSelectValue:{type:Number,default:0},inputProperties:{type:Object,default:function(){return{}}}},data:function(){return{tableHeaders:[{key:"value",text:"Значение",position_in_template:"grid-area: value",width:[100]}],tableItems:[],uniqueIndex:0,tableValue:[]}},computed:{fieldLabel:function(){return this.inputProperties.label}},watch:{countSelectValue:function(){0==this.countSelectValue&&(console.log("del"),this.tableItems.splice(0,this.tableItems.length),this.tableValue.splice(0,this.tableValue.length))}},mounted:function(){this.addingItem()},methods:{eventKeydownElementEnd:function(e){"Tab"==e.key&&0==e.shiftKey&&(e.preventDefault(),e.target.closest(".el-field-dialog-list-box-item").querySelector(".element-start button").focus()),console.log(e)},eventKeydown:function(e){console.log(e),"Insert"==e.key&&this.eventKeydownInsert(e)},eventKeydownInsert:function(e){this.addingItem(),setTimeout((function(){var t=new Event("click");e.target.closest(".el-field-dialog-list-box-item").dispatchEvent(t),e.target.closest(".el-field-dialog-list-box-item").querySelector(".body").lastChild.querySelector("input").focus()}),100)},eventKeydownEnter:function(){},addingItem:function(){this.uniqueIndex=this.uniqueIndex+1,this.tableItems.push({uniqueIndex:this.uniqueIndex})},deletingItem:function(e){this.tableItems.splice(e,1)},inputValue:function(e){var t=this;if(console.log(e),this.tableValue=[],"field"==this.inputProperties.type)for(var i=function(){var i=l[n];t.tableValue.find((function(t){return t.id==e[i].id}))||t.tableValue.push(e[i])},n=0,l=Object.keys(e);n<l.length;n++)i();else if("choice"==this.inputProperties.type)for(var o=function(){var i=s[a];e[i]&&(t.tableValue.find((function(t){return t.value==e[i].value}))||t.tableValue.push(e[i]))},a=0,s=Object.keys(e);a<s.length;a++)o()},acceptList:function(){console.log(this.tableValue),this.$emit("accept-list",this.tableValue)}}},$=B,K=(i("7ae9"),Object(p["a"])($,a,s,!1,null,"6ed4b87c",null)),O=K.exports,P=i("b35e"),F={name:"ElFieldDialogListBox",components:{ElFieldDialogListBoxItem:O,DialogBarRight:o["a"],ElBtnIconSmall:P["a"]},model:{prop:"inputValue",event:"input-value"},props:{isShow:{type:Boolean,default:!1},isSingleLine:{type:Boolean,default:!1},isHideMessage:{type:Boolean,default:!1},isHideLabel:{type:Boolean,dafault:!1},isHideUnderline:{type:Boolean,dafault:!1},isDisabled:{type:Boolean,default:!1},isBtnClear:{type:Boolean,default:!0},inputProperties:Object,selectedItem:null},data:function(){return{isDialogShow:!1,fieldValue:this.inputValue,fieldValueText:null,countSelectValue:0}},computed:{fieldLabel:function(){if(!this.isHideLabel)return this.inputProperties.label}},mounted:function(){this.isDialogShow=this.isShow,console.log(document.activeElement),setTimeout((function(){document.activeElement.closest(".item").querySelector(".body-column__item").firstChild.querySelector("input").focus()}),1e3)},methods:{eventOpenDialog:function(){var e=this;this.isDialogShow=!1,setTimeout((function(){return e.isDialogShow=!0}),100)},eventCloseDialog:function(){this.isDialogShow=!1,this.fieldListBoxComponent=null,0==this.countSelectValue&&this.eventClearValue()},eventAcceptList:function(e){console.log(e),this.isDialogShow=!1,this.fieldValueText=this.buildingStringDisplay(e),this.$emit("input-value",this.buildingStringEmit(e))},eventClearValue:function(){this.fieldValue=null,this.fieldValueText=null,this.countSelectValue=0,this.emitInputValue(),this.emitClearValue()},eventKeyEnter:function(e){var t={key:e.key,value:this.fieldValue,event:e};this.emitKeyEnter(t)},emitInputValue:function(){this.$emit("input-value",this.fieldValue)},emitClearValue:function(){this.$emit("clear-value")},emitKeyEnter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("enter"),this.$emit("keydown-enter",e)},buildingStringDisplay:function(e){if(e.length){var t="";if("field"==this.inputProperties.type){var i=this.$store.getters["DataTable/GET_RELATED_MODEL_VIEW"](this.inputProperties["related_model_name"]);if("{id}"!=i){var n=i.match(/[{\w}]/gi).join(",").replace(/,/g,"").slice(1,-1).split("}{");return e.forEach((function(e){var l="";l=i,n.forEach((function(t){l=l.replace("{".concat(t,"}"),e[t])})),t+="".concat(l,"; ")})),t}}else if("choice"==this.inputProperties.type)return e.forEach((function(e){t+="".concat(e["display_name"],"; ")})),t}},buildingStringEmit:function(e){if(this.countSelectValue=e.length,e.length){var t="";return"field"==this.inputProperties.type?e.forEach((function(e){t+="".concat(e.id,", ")})):"choice"==this.inputProperties.type&&e.forEach((function(e){t+="".concat(e.value,", ")})),console.log(t),t.slice(0,-2)}}}},q=F,R=(i("2051"),i("6544")),j=i.n(R),z=i("8654"),A=Object(p["a"])(q,n,l,!1,null,"01c7d1eb",null);t["default"]=A.exports;j()(A,{VTextField:z["a"]})}}]);
//# sourceMappingURL=chunk-bdc63272.9a5847da.js.map